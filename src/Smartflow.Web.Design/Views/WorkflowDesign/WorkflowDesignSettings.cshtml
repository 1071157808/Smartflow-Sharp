@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>流程节点数据配置</title>
    <link href="~/Content/smartflow.css" rel="stylesheet" />
    <link href="~/Content/tree/css/zTreeStyle/zTreeStyle.css" rel="stylesheet" />
    <link href="~/Content/jqgrid/css/ui.jqgrid.css" rel="stylesheet" />
    <link href="~/Content/jqgrid/css/redmond/jquery-ui-1.8.16.custom.css" rel="stylesheet" />
    <script src="~/Content/jquery.min.js"></script>
    <script src="~/Content/tree/jquery.ztree.all.min.js"></script>
    <script src="~/Content/design.js"></script>
    <script src="~/Content/jqgrid/js/jquery.jqGrid.src.js"></script>
    <script src="~/Content/jqgrid/js/grid.locale-cn.js"></script>
    <script src="~/Content/index.js"></script>
    <style type="text/css">
        #t_userlist {
            border-top: none;
            height: 28px;
        }

        .tables {
            margin: 0;
            padding: 0;
            border-collapse: collapse;
        }

        #pager_right {
            display: none;
        }

        #pager {
            height: 30px;
        }

        .searchBar {
            line-height: 16px;
            outline: none;
        }

        th.ui-th-column div {
            white-space: normal !important;
            height: auto !important;
            padding: 0px;
        }

        .ui-jqgrid-htable {
            border-collapse: collapse;
        }
    </style>
    <script type="text/javascript">
        $(function () {
            //初始化
            SMF.init();
        });
    </script>

    <script type="text/javascript">


        $(function () {
            var treeSetting = {
                view: {
                    showLine: true
                },
                data: {
                    simpleData: {
                        enable: true,
                        idKey: "Code",
                        pIdKey: "ParentCode",
                        rootPId: ""
                    },
                    key: {
                        name: "Name",
                        children: "Children"
                    }
                },
                callback: {
                    beforeClick: function (treeId, treeNode) {

                    }
                }
            };

            var settings = {
                url: '@Url.Action("GetOrgTree", "WorkflowDesign")',
                type: 'post',
                dataType: 'json'
            };

            settings.success = function (serverData) {
                var treeObj = $.fn.zTree.init($("#tree"), treeSetting, serverData);
                //var treeObj = $.fn.zTree.getZTreeObj("tree");
                var node = treeObj.getNodesByParam("Code", "000", null);
                if (node) {
                    treeObj.expandAll(true);
                }
            }
            $.ajax(settings);
        });
    </script>


    <script type="text/javascript">

        @*$(function () {

            var rowIndex = 1;
            $("#data_grid").grid({
                //width: 600,
                //height: 300,
                keepHeight: true,				//保持最后一页高度
                dataSource: '@Url.Action("GetUserList", "WorkflowDesign")',
                columns: [
                    { field: 'ID', title: '主键', hidden: true,className: "ids", align: "center" },
                    { field: 'Name', title: '姓名', Width: 150, align: 'center' },
                    { field: 'OrgName', title: '部门', Width: 120, align: 'center' },

                ],
                // 自定义formatter
                formatters: {

                },
                editRow: function (e, row) {
                    alert('edit row ' + row.id);
                },
                selectable: 'row multiple',		//是否可以选中行
                pageable: { pageSize: 10 },		//分页参数
                onDblclick: function (e) {
                    console.log(e)
                }
            });



        });*@
    </script>

</head>
<body>
    <div class="container" style="width:100%;background:#fff;padding:5px;">
        <div class="tabsholder3">
            <div class="card-tabs-bar graygreen">
                <a href="javascript:;" class="active">基本信息</a>
                <a href="javascript:;">参与角色</a>
                <a href="javascript:;">参与人</a>
                <a href="javascript:;">规则配置</a>
            </div>
            <div class="card-tabs-stack graygreen">
                <div data-tab="基本信息" style="display: block;height:240px;overflow:hidden;">
                    <table class="smartflow-table">
                        <tr>
                            <td style="width:60px;">名称</td>
                            <td>
                                <input type="text" style="width:100%;height:18px;" id="txtName" />
                            </td>
                        </tr>
                    </table>
                </div>
                <div data-tab="参与角色" style="display: none; height: 240px;">
                    <table class="smartflow-table">
                        <tr>
                            <td>
                                <fieldset class="smartflow-box">
                                    <legend>待选角色</legend>
                                    <ul class="smartflow-list" id="roleGrid"></ul>
                                </fieldset>
                            </td>
                            <td class="smartflow-tools"></td>
                            <td>
                                <fieldset class="smartflow-box">
                                    <legend>已选角色</legend>
                                    <ul class="smartflow-list" id="roleAssign"></ul>
                                </fieldset>
                            </td>
                        </tr>
                    </table>
                </div>
                <div data-tab="参与人" style="display: none; height: 240px;">
                    <table class="smartflow-table">
                        <tr>
                            <td class="smartflow-box" style="height:240px;width:160px;">
                                <ul id="tree" class="ztree" style="height:100%; overflow:auto;width:160px;"></ul>
                            </td>
                            <td>
                                <table id="userlist" class="table"></table>
                                <div id="pager"></div>
                            </td>
                            <td class="smartflow-box" style="height:240px;width:80px;"></td>
                        </tr>
                    </table>
                </div>
                <div data-tab="规则配置" style="display: none; height: 240px;">
                    <table class="smartflow-table">
                        <tr>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <script type="text/template" id="tbTemplate">
        <table class="tables">
            <tr>
                <td style="vertical-align:top;">
                    <label for="txtSearchKey">关键字：</label>
                    <input type="text" id="txtSearchKey" class="searchBar" placeholder="用户名称" />
                </td>
                <td style="vertical-align:top;">
                    <input type="button" value="搜索" />
                </td>
            </tr>
        </table>
    </script>
</body>
</html>
